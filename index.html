<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Green Earth</title>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
  <link href="https://cdn.jsdelivr.net/npm/daisyui@5" rel="stylesheet" type="text/css" />
  <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>


  <link rel="stylesheet" href="css/style.css">
</head>

<body class="bg-base-100 bg-green-50">

  <!-- Navbar -->
  <header class="fixed top-0 left-0 w-full z-50">
    <nav class="bg-green-700 text-white px-4 sm:px-6 lg:px-8 py-3
              flex items-center justify-between md:grid md:grid-cols-3 md:items-center">
      <div>
        <a href="#" class="text-lg md:text-2xl font-bold">Green Earth</a>
      </div>

      <div class="hidden md:flex justify-center">
        <ul class="flex gap-8 text-base">
          <li><a href="#" class="hover:text-yellow-300">Home</a></li>
          <li><a href="#" class="hover:text-yellow-300">Gallery</a></li>
          <li><a href="#" class="hover:text-yellow-300">Plant a Tree</a></li>
        </ul>
      </div>

      <div class="flex justify-end">
        <button
          class="hidden md:inline-flex btn bg-yellow-400 text-green-800 rounded-full px-6 border-none hover:bg-yellow-300">
          Plant a Tree
        </button>

        <button id="menu-btn" class="md:hidden btn btn-ghost p-2">☰</button>
      </div>
    </nav>

    <div id="mobile-menu"
      class="hidden md:hidden absolute right-4 top-full mt-2 bg-green-600 text-white p-3 rounded-box w-48">
      <a class="block p-2 rounded hover:bg-green-500" href="#">Home</a>
      <a class="block p-2 rounded hover:bg-green-500" href="#">Gallery</a>
      <a class="block p-2 rounded hover:bg-green-500" href="#">Plant a Tree</a>
      <button class="btn w-full mt-3 bg-yellow-400 text-green-800 rounded-full border-none hover:bg-yellow-300">
        Plant a Tree
      </button>
    </div>
  </header>


  <!-- Hero -->
  <section class="relative bg-green-100 pt-22 px-1 overflow-hidden">
    <div class="flex justify-center items-center gap-1 mx-auto flex-wrap">

      <div class="hidden md:block flex-shrink-0">
        <img src="./assets/hero-leaf1.png" alt="Leaf Left" class="w-60 md:w-90 h-50 md:h-70 object-contain">
      </div>

      <div class="flex flex-col items-center text-center space-y-6 px-4 md:px-0">
        <h1 class="text-4xl md:text-5xl font-bold text-gray-800">
          Plant a Tree, Grow a Future
        </h1>
        <p class="text-lg md:text-xl text-gray-700 max-w-2xl">
          Join our mission to plant 1 million trees and make the Earth greener for future generations.
        </p>
        <button class="btn bg-yellow-400 text-green-800 font-bold rounded-full px-8 border-none hover:bg-yellow-300">
          Get Involved
        </button>
      </div>

      <div class="hidden md:block flex-shrink-0">
        <img src="./assets/hero-leaf2.png" alt="Leaf Right" class="w-60 md:w-90 h-50 md:h-70 object-contain">
      </div>

    </div>
  </section>

  <!-- Main -->
  <main>
    <section class="min-h-screen text-black py-20 px-1">
      <div class="text-center py-8">
        <h2 class="text-3xl font-bold text-black">Choose Your Trees</h2>
      </div>

      <div class="flex flex-col md:flex-row justify-between items-start gap-6 px-8 mx-auto w-full">

        <div class="w-full md:w-1/6 rounded-lg p-4 md:block mb-4">
          <span class="text-2xl font-bold">Categories</span>
          <ul id="categories-list" class="space-y-2 py-2">
          </ul>
        </div>


        <div class="w-full flex-1 md:w-2/4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">

        </div>

        <div class="w-full md:w-1/6 rounded-lg p-4 bg-white shadow-md">
          <h3 class="text-2xl font-bold mb-4">Your Cart</h3>

          <div id="cart-items" class="space-y-4">
          </div>

          <div class="flex justify-between items-center mt-6 pt-4 border-t border-gray-300">
            <span class="text-lg font-semibold">Total:</span>
            <span id="cart-total" class="text-xl font-bold">৳0</span>
          </div>

        </div>
    </section>

    <div id="cart-modal" class="fixed inset-0 bg-opacity-90 flex items-center justify-center hidden z-50">
      <div class="bg-white border-3 border-green-600 rounded-lg shadow-lg p-6 max-w-sm w-full text-center">
        <h3 id="modal-text" class="text-lg font-semibold mb-4">Plant added to cart</h3>
        <button id="modal-ok" class="bg-green-700 text-white px-6 py-2 rounded-full hover:bg-green-600">
          Okay
        </button>
      </div>
    </div>

  </main>

  <!-- About Campaign -->
  <section class="bg-green-50 py-16 px-8">
    <h2 class="text-center text-4xl font-bold text-gray-800 mb-12">
      About the Campaign
    </h2>

    <div class="flex flex-col md:flex-row items-center justify-center gap-8 max-w-4xl mx-auto">

      <div class="w-full md:w-1/2 flex justify-center">
        <img src="./assets/about.png" alt="Plant" class="w-3/4 md:w-full h-auto rounded-2xl object-cover">
      </div>

      <div class="w-full md:w-1/2 text-gray-700 space-y-4 text-center md:text-left">
        <p class="text-lg">
          Green Earth is a global tree plantation initiative dedicated to fighting climate change. Since our start,
          we've planted over 500,000 trees worldwide. By joining our campaign, you help restore forests, create habitats
          for wildlife, and combat global warming.
        </p>
        <ul class="list-disc pl-5 text-gray-700 space-y-2">
          <li>Restoration of natural habitats</li>
          <li>Improvement of air quality</li>
          <li>Support for local communities</li>
        </ul>
      </div>

    </div>
  </section>


  <!-- Impact -->
  <section class="bg-green-100 py-16 px-4">
    <h2 class="text-center text-4xl font-bold text-gray-800 mb-12">
      Our Impact
    </h2>

    <div class="flex flex-col md:flex-row justify-center items-center gap-8 max-w-6xl mx-auto">

      <div class="bg-white p-8 rounded-2xl shadow-lg text-center flex-1 w-full md:w-auto">
        <h3 class="text-5xl font-bold text-green-800 mb-2">500K+</h3>
        <p class="text-gray-600 text-lg">Trees Planted</p>
      </div>

      <div class="bg-white p-8 rounded-2xl shadow-lg text-center flex-1 w-full md:w-auto">
        <h3 class="text-5xl font-bold text-green-800 mb-2">120+</h3>
        <p class="text-gray-600 text-lg">Communities Involved</p>
      </div>

      <div class="bg-white p-8 rounded-2xl shadow-lg text-center flex-1 w-full md:w-auto">
        <h3 class="text-5xl font-bold text-green-800 mb-2">30+</h3>
        <p class="text-gray-600 text-lg">Countries Reached</p>
      </div>

    </div>
  </section>

  <!-- Donation -->
  <section class="bg-green-800 flex items-center justify-center py-10 px-8 sm:py-12 sm:px-8">
    <div class="text-center py-4 w-full max-w-md lg:max-w-xl space-y-6">
      <h2 class="text-white text-2xl md:text-3xl font-semibold">
        Plant a Tree Today
      </h2>

      <div class="bg-green-700 p-4 sm:p-8 rounded-2xl">
        <form class="flex flex-col space-y-4">
          <input type="text" placeholder="Your Name"
            class="w-full p-3 rounded-lg bg-white text-gray-800 focus:outline-none focus:ring-2 focus:ring-green-300">

          <input type="email" placeholder="Your Email Address"
            class="w-full p-3 rounded-lg bg-white text-gray-800 focus:outline-none focus:ring-2 focus:ring-green-300">

          <select
            class="w-full p-3 rounded-lg bg-white text-gray-800 focus:outline-none focus:ring-2 focus:ring-green-300">
            <option value="" disabled selected hidden>Number of Trees</option>
            <option value="1">1 Tree</option>
            <option value="5">5 Trees</option>
            <option value="10">10 Trees</option>
            <option value="50">50 Trees</option>
            <option value="100">100 Trees</option>
          </select>

          <button type="submit"
            class="w-full bg-yellow-400 text-green-900 font-bold py-3 rounded-full hover:bg-yellow-300 transition-colors">
            Donate Now
          </button>
        </form>
      </div>
    </div>
  </section>


  <!-- Footer -->
  <footer class="bg-[#14532d] h-18 md:h-18 flex items-center justify-center">
    <span class="text-white text-[16px]">© 2025 Green Earth. All Rights Reserved.</span>
  </footer>


  <!-- Loading -->
<div id="loading-spinner" class="fixed inset-0 flex items-center justify-center hidden z-50">
  <div class="w-16 h-16 border-4 border-green-700 border-t-transparent rounded-full animate-spin"></div>
</div>


  <!-- Modal -->
  <div id="tree-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50">
    <div class="bg-white rounded-3xl shadow-lg p-6 max-w-md w-full relative">
      <h3 id="tree-modal-name" class="text-2xl font-bold mb-4"></h3>
      <img id="tree-modal-img" src="" alt="" class="w-full h-64 object-cover rounded-xl mb-4">
      <p><span class="font-semibold">Category:</span> <span id="tree-modal-category"></span></p>
      <p><span class="font-semibold">Price:</span> ৳<span id="tree-modal-price"></span></p>
      <p class="mt-2 text-gray-700" id="tree-modal-description"></p>
      <button id="tree-modal-close"
        class="absolute bottom-4 right-4 bg-green-700 text-white px-4 py-2 rounded-full hover:bg-green-600">
        Close
      </button>
    </div>
  </div>


<script>
  const menuBtn = document.getElementById('menu-btn');
  const mobileMenu = document.getElementById('mobile-menu');
  const categoriesList = document.getElementById('categories-list');
  const middleDiv = document.querySelector('.w-full.flex-1');
  const spinner = document.getElementById('loading-spinner');

  // Spinner helpers
  function showSpinner() { spinner.classList.remove('hidden'); }
  function hideSpinner() { spinner.classList.add('hidden'); }

  menuBtn.addEventListener('click', () => {
    mobileMenu.classList.toggle('hidden');
  });

  async function loadCategories() {
    showSpinner(); // show spinner
    const allTreesItem = document.createElement('li');
    allTreesItem.innerHTML = `<a href="#" class="block p-2 rounded-lg bg-green-700 text-white">All Trees</a>`;
    categoriesList.appendChild(allTreesItem);

    try {
      const res = await fetch('https://openapi.programming-hero.com/api/categories');
      const data = await res.json();

      data.categories.forEach(cat => {
        const li = document.createElement('li');
        li.innerHTML = `<a href="#" class="block p-2 rounded-lg text-black hover:bg-green-100 hover:text-green-700" data-id="${cat.id}">${cat.category_name}</a>`;
        categoriesList.appendChild(li);
      });

      addCategoryClickEvents();

      const allTreesLink = categoriesList.querySelector('a');
      allTreesLink.click();
    } catch (err) {
      console.error('Failed to fetch categories:', err);
    } finally {
      hideSpinner(); // hide spinner
    }
  }

  function addCategoryClickEvents() {
    const items = categoriesList.querySelectorAll('a');
    items.forEach(item => {
      item.addEventListener('click', async e => {
        e.preventDefault();
        items.forEach(i => i.classList.remove('bg-green-700', 'text-white'));
        items.forEach(i => i.classList.add('text-black'));
        item.classList.add('bg-green-700', 'text-white');
        item.classList.remove('text-black');

        middleDiv.innerHTML = '';
        showSpinner(); // show spinner before loading plants

        let url;
        if (item.textContent.trim() === 'All Trees') {
          url = 'https://openapi.programming-hero.com/api/plants';
        } else {
          const id = item.getAttribute('data-id');
          url = `https://openapi.programming-hero.com/api/category/${id}`;
        }

        try {
          const res = await fetch(url);
          const data = await res.json();
          renderPlants(data);
        } catch (err) {
          console.error('Failed to fetch plants:', err);
        } finally {
          hideSpinner(); // hide spinner after loading
        }
      });
    });
  }

  function renderPlants(data) {
    if (!data || !data.plants) return;
    data.plants.forEach(plant => {
      const div = document.createElement('div');
      div.className = 'w-full max-w-xs bg-white rounded-3xl overflow-hidden shadow-lg mx-auto';
      div.innerHTML = `
        <div class="w-full h-56 px-4 pt-4">
          <img src="${plant.image}" alt="${plant.name}" class="w-full h-full object-cover">
        </div>
        <div class="px-4 py-3">
          <h3 class="text-2xl font-bold text-gray-800 mb-2 plant-name" data-id="${plant.id}">${plant.name}</h3>
          <p class="text-gray-600 text-sm mb-2">${plant.description || ''}</p>
          <div class="flex justify-between items-center mb-2">
            <span class="bg-green-100 text-green-700 text-xs font-semibold px-3 py-1 rounded-full">
              ${plant.category || 'Unknown'}
            </span>
            <span class="text-xl font-bold text-gray-800">
              ৳${plant.price || 0}
            </span>
          </div>
          <button 
            class="w-full bg-green-700 text-white font-bold py-1 px-6 rounded-full hover:bg-green-600 transition-colors add-to-cart" 
            data-id="${plant.id}" 
            data-name="${plant.name}" 
            data-price="${plant.price}">
            Add to Cart
          </button>
        </div>
      `;
      middleDiv.appendChild(div);
    });
  }

  const treeModal = document.getElementById('tree-modal');
  const treeModalName = document.getElementById('tree-modal-name');
  const treeModalImg = document.getElementById('tree-modal-img');
  const treeModalCategory = document.getElementById('tree-modal-category');
  const treeModalPrice = document.getElementById('tree-modal-price');
  const treeModalDescription = document.getElementById('tree-modal-description');
  const treeModalClose = document.getElementById('tree-modal-close');

  document.addEventListener("click", async (e) => {
    // Click on tree name
    if (e.target.classList.contains("plant-name")) {
      const id = e.target.dataset.id;
      showSpinner();
      try {
        const res = await fetch(`https://openapi.programming-hero.com/api/plant/${id}`);
        const data = await res.json();
        const plant = data.data;

        treeModalName.textContent = plant.name;
        treeModalImg.src = plant.image;
        treeModalCategory.textContent = plant.category || 'Unknown';
        treeModalPrice.textContent = plant.price || 0;
        treeModalDescription.textContent = plant.description || 'No description available';
        treeModal.classList.remove('hidden');
      } catch (err) {
        console.error('Failed to fetch plant info:', err);
      } finally {
        hideSpinner();
      }
    }

    // Close modal
    if (e.target === treeModal || e.target === treeModalClose) {
      treeModal.classList.add('hidden');
    }
  });

  const cart = {};
  const cartItemsContainer = document.getElementById("cart-items");
  const cartTotal = document.getElementById("cart-total");
  const modal = document.getElementById('cart-modal');
  const modalText = document.getElementById('modal-text');
  const modalOk = document.getElementById('modal-ok');

  document.addEventListener("click", (e) => {
    if (e.target.closest(".add-to-cart")) {
      const btn = e.target.closest(".add-to-cart");
      const id = btn.dataset.id;
      const name = btn.dataset.name;
      const price = parseInt(btn.dataset.price);

      if (!cart[id]) cart[id] = { name, price, qty: 1 };
      else cart[id].qty++;

      renderCart();
      showCartModal(name);
    }

    if (e.target.closest(".remove-item")) {
      const id = e.target.closest(".remove-item").dataset.id;
      delete cart[id];
      renderCart();
    }
  });

  function renderCart() {
    cartItemsContainer.innerHTML = "";
    let total = 0;

    Object.keys(cart).forEach(id => {
      const item = cart[id];
      total += item.price * item.qty;

      const div = document.createElement("div");
      div.className = "flex justify-between items-center bg-green-100 p-3 rounded-lg";
      div.innerHTML = `
        <div>
          <span class="block font-semibold">${item.name}</span>
          <span class="text-sm text-gray-700">৳${item.price} × ${item.qty}</span>
        </div>
        <button data-id="${id}" class="remove-item ml-4 text-gray-400 hover:text-red-500 transition-transform transform hover:scale-125">
          <i class="fa-solid fa-xmark"></i>
        </button>
      `;
      cartItemsContainer.appendChild(div);
    });

    cartTotal.textContent = `৳${total}`;
  }

  function showCartModal(plantName) {
    modalText.textContent = `${plantName} has been added to the cart`;
    modal.classList.remove('hidden');
  }

  modalOk.onclick = () => modal.classList.add('hidden');
  modal.onclick = (e) => { if (e.target === modal) modal.classList.add('hidden'); };

  // Initial load
  loadCategories();
</script>

</body>

</html>